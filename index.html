<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Zoobotânico - Protótipo</title>
    <!-- Carrega o Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Fonte Inter (padrão do Tailwind) */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Esconde as setas do input number */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- Container principal do "app" -->
    <div class="max-w-md w-full bg-white rounded-2xl shadow-xl overflow-hidden" style="min-height: 80vh;">

        <!-- Tela de Login (View 1) -->
        <div id="loginScreen">
            <div class="p-6">
                <div class="text-center pt-8 pb-4">
                    <!-- Placeholder para o logo -->
                    <div class="bg-green-600 w-20 h-20 rounded-full mx-auto flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.121 15.536c-1.171 1.952-3.07 1.952-4.242 0-1.172-1.953-1.172-5.119 0-7.072 1.171-1.952 3.07-1.952 4.242 0 1.172 1.953 1.172 5.119 0 7.072z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-800">App Zoobotânico</h1>
                    <p class="text-gray-500 text-sm">Agendamento de Visitas</p>
                </div>

                <form class="space-y-4 pt-4" onsubmit="event.preventDefault(); showView('homeScreen');">
                    <div>
                        <label for="cpf" class="block text-sm font-medium text-gray-700">CPF ou E-mail</label>
                        <input type="text" id="cpf" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" placeholder="Digite seu CPF ou e-mail">
                    </div>

                    <div>
                        <label for="senha" class="block text-sm font-medium text-gray-700">Senha</label>
                        <input type="password" id="senha" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" placeholder="••••••••">
                    </div>

                    <button type="submit" class="w-full bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition duration-300 shadow-md">
                        Entrar
                    </button>

                    <div class="relative flex items-center justify-center my-4">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300"></div>
                        </div>
                        <div class="relative px-2 bg-white text-sm text-gray-500">ou</div>
                    </div>

                    <button type="button" class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 shadow-md flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 48 48">
                           <path d="M46.755 24.316c0-1.636-.145-3.273-.436-4.909H24v9.273h12.709c-.545 2.909-2.182 5.455-4.636 7.182v5.964h7.636c4.545-4.182 7.091-10.273 7.091-17.51Z" fill="#4285F4"></path><path d="M24 48c6.545 0 12.091-2.182 16.091-5.818L32.455 36.218c-2.091 1.455-4.818 2.273-7.909 2.273-6.091 0-11.273-4.091-13.091-9.727H1.273v6.182C5.091 43.182 13.727 48 24 48Z" fill="#34A853"></path><path d="M10.909 28.545c-.545-1.636-.818-3.364-.818-5.182s.273-3.545.818-5.182V12H1.273C.455 14.818 0 17.818 0 20.909c0 3.091.455 6.091 1.273 8.909Z" fill="#FBBC05"></path><path d="M24 9.455c3.545 0 6.636 1.273 9.091 3.636l6.636-6.636C36.091 2.182 30.545 0 24 0 13.727 0 5.091 4.818 1.273 12l9.636 6.182C12.727 13.545 17.909 9.455 24 9.455Z" fill="#EA4335"></path>
                        </svg>
                        <span>Entrar com Gov.br</span>
                    </button>
                </form>
            </div>
        </div>

        <!-- Tela Principal (Home) (View 2) -->
        <div id="homeScreen" class="hidden">
            <div class="p-6">
                <header class="flex justify-between items-center mb-6">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Meus Agendamentos</h1>
                        <p class="text-gray-500">Olá, Visitante!</p>
                    </div>
                    <button onclick="showView('loginScreen')" class="text-sm text-red-500 hover:text-red-700">Sair</button>
                </header>

                <!-- Seção de Agendamentos Futuros -->
                <div>
                    <h2 class="text-lg font-semibold text-gray-700 mb-3">Próxima Visita</h2>
                    <!-- Card de Agendamento (Exemplo) -->
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4 shadow-sm">
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="block text-sm font-medium text-green-700">Zoobotânico Municipal</span>
                                <span class="block text-lg font-bold text-green-900">24 de Outubro, 2025</span>
                                <span class="block text-sm text-green-800">14:00 • 3 Pessoas</span>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                            </svg>
                        </div>
                    </div>

                    <!-- Mensagem para novo agendamento -->
                    <div class="bg-gray-50 rounded-lg p-4 text-center">
                        <p class="text-gray-600">Deseja agendar uma nova visita?</p>
                        <button onclick="startBooking()" class="mt-3 w-full bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition duration-300 shadow-md">
                            Agendar Nova Visita
                        </button>
                    </div>
                </div>

                <!-- Histórico de Agendamentos -->
                <div class="mt-8">
                    <h2 class="text-lg font-semibold text-gray-700 mb-3">Histórico de Visitas</h2>
                    <!-- Item de Histórico (Exemplo) -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 mb-2 shadow-sm">
                        <span class="block text-sm font-medium text-gray-600">15 de Julho, 2025</span>
                        <span class="block text-xs text-gray-500">10:00 • 2 Pessoas • Concluído</span>
                    </div>
                    <!-- Item de Histórico (Exemplo) -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm">
                        <span class="block text-sm font-medium text-gray-600">03 de Março, 2025</span>
                        <span class="block text-xs text-gray-500">09:00 • 5 Pessoas • Concluído</span>
                    </div>
                </div>

            </div>
        </div>

        <!-- Tela de Agendamento (View 3) -->
        <div id="scheduleScreen" class="hidden">
            <div class="p-6">
                <header class="flex items-center mb-6">
                    <button onclick="showView('homeScreen')" class="text-gray-600 hover:text-gray-900">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <h1 class="text-xl font-bold text-gray-800 mx-auto">Novo Agendamento</h1>
                </header>

                <!-- Passo 1: Quantidade de Visitantes -->
                <div class="mb-5">
                    <label for="visitors" class="block text-sm font-medium text-gray-700 mb-2">Quantos visitantes? (Máx. 5)</label>
                    <div class="flex items-center justify-center space-x-4">
                        <button id="decrementVisitors" class="bg-gray-200 text-gray-700 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold">-</button>
                        <input type="number" id="visitors" value="1" min="1" max="5" class="w-20 text-center text-xl font-bold border-transparent focus:border-transparent focus:ring-0" readonly>
                        <button id="incrementVisitors" class="bg-green-600 text-white rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold">+</button>
                    </div>
                </div>

                <!-- Passo 2: Calendário -->
                <div class="mb-5">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Escolha uma data</label>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                        <div class="flex justify-between items-center mb-3">
                            <button id="prevMonth" class="text-gray-600 hover:text-gray-900">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                                </svg>
                            </button>
                            <span id="monthYear" class="text-lg font-semibold text-gray-800"></span>
                            <button id="nextMonth" class="text-gray-600 hover:text-gray-900">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </button>
                        </div>
                        <div id="calendarWeekdays" class="grid grid-cols-7 gap-1 text-center text-xs text-gray-500 mb-2">
                            <span>Dom</span><span>Seg</span><span>Ter</span><span>Qua</span><span>Qui</span><span>Sex</span><span>Sáb</span>
                        </div>
                        <div id="calendarGrid" class="grid grid-cols-7 gap-1 text-center">
                            <!-- Dias do calendário serão gerados pelo JS -->
                        </div>
                    </div>
                </div>

                <!-- Passo 3: Horários Disponíveis -->
                <div id="timeSlotsContainer" class="mb-6 hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Escolha um horário</label>
                    <div id="timeSlots" class="grid grid-cols-3 gap-2">
                        <!-- Horários serão preenchidos pelo JS -->
                        <button class="time-slot p-3 border border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition">09:00</button>
                        <button class="time-slot p-3 border border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition">10:00</button>
                        <button class="time-slot p-3 border border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition">11:00</button>
                        <button class="time-slot p-3 border border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition">13:00</button>
                        <button class="time-slot p-3 border border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition">14:00</button>
                        <button class="time-slot p-3 border border-gray-300 rounded-lg text-gray-400 bg-gray-50 cursor-not-allowed" disabled>15:00</button>
                        <button class="time-slot p-3 border border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition">16:00</button>
                    </div>
                </div>

                <!-- Passo 4: Confirmar -->
                <button id="confirmBookingButton" onclick="confirmBooking()" class="w-full bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition duration-300 shadow-md disabled:bg-gray-400" disabled>
                    Confirmar Agendamento
                </button>

            </div>
        </div>

        <!-- Tela de Confirmação (View 4) -->
        <div id="confirmationScreen" class="hidden">
            <div class="p-6 text-center">
                <div class="bg-green-100 w-24 h-24 rounded-full mx-auto flex items-center justify-center mb-6 mt-8">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                </div>
                <h1 class="text-2xl font-bold text-gray-800 mb-2">Agendamento Confirmado!</h1>
                <p class="text-gray-600 mb-6">Sua visita ao Zoobotânico foi agendada com sucesso.</p>

                <!-- Detalhes do Agendamento -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 text-left space-y-3 mb-8">
                    <div>
                        <span class="block text-xs font-medium text-gray-500">Local</span>
                        <span class="block text-sm font-semibold text-gray-800">Zoobotânico Municipal</span>
                    </div>
                    <div id="confirmationDetails">
                        <!-- Detalhes preenchidos pelo JS -->
                    </div>
                </div>

                <p class="text-xs text-gray-500 mb-6">Um lembrete será enviado para seu e-mail. Chegue com 15 minutos de antecedência.</p>

                <button onclick="showView('homeScreen')" class="w-full bg-gray-700 text-white py-3 px-4 rounded-lg font-semibold hover:bg-gray-800 transition duration-300 shadow-md">
                    Voltar ao Início
                </button>
            </div>
        </div>

    </div>

    <script>
        // --- GERENCIAMENTO DE ESTADO E NAVEGAÇÃO ---

        // Armazena a visualização atual
        let currentView = 'loginScreen';
        // Armazena os detalhes do agendamento
        const bookingDetails = {
            visitors: 1,
            date: null,
            time: null
        };
        // Armazena os dados do calendário
        let calendarDate = new Date();
        // Armazena o dia de hoje para desabilitar datas passadas
        const today = new Date();
        today.setHours(0, 0, 0, 0); // Zera o horário para comparação de datas

        // Obtém referências para as telas
        const views = {
            loginScreen: document.getElementById('loginScreen'),
            homeScreen: document.getElementById('homeScreen'),
            scheduleScreen: document.getElementById('scheduleScreen'),
            confirmationScreen: document.getElementById('confirmationScreen')
        };

        // Função para trocar de tela
        function showView(viewId) {
            // Esconde todas as telas
            for (let id in views) {
                if (views[id]) {
                    views[id].classList.add('hidden');
                }
            }
            // Mostra a tela desejada
            if (views[viewId]) {
                views[viewId].classList.remove('hidden');
                currentView = viewId;
            } else {
                console.error("View not found: ", viewId);
            }
        }

        // --- LÓGICA DA TELA DE AGENDAMENTO ---

        function startBooking() {
            // Reseta os detalhes do agendamento
            bookingDetails.visitors = 1;
            bookingDetails.date = null;
            bookingDetails.time = null;
            
            // Reseta os campos da UI
            document.getElementById('visitors').value = 1;
            document.getElementById('timeSlotsContainer').classList.add('hidden');
            document.getElementById('confirmBookingButton').disabled = true;

            // Remove seleções anteriores
            clearSelections(document.querySelectorAll('.time-slot'));
            clearSelections(document.querySelectorAll('.day-cell'));

            // Renderiza o calendário para o mês atual
            calendarDate = new Date(); // Garante que começa no mês atual
            renderCalendar();
            
            // Mostra a tela de agendamento
            showView('scheduleScreen');
        }

        // --- LÓGICA DO CONTADOR DE VISITANTES ---
        
        const visitorsInput = document.getElementById('visitors');
        const incrementVisitorsBtn = document.getElementById('incrementVisitors');
        const decrementVisitorsBtn = document.getElementById('decrementVisitors');

        incrementVisitorsBtn.addEventListener('click', () => {
            let count = parseInt(visitorsInput.value);
            if (count < 5) {
                count++;
                visitorsInput.value = count;
                bookingDetails.visitors = count;
            }
        });

        decrementVisitorsBtn.addEventListener('click', () => {
            let count = parseInt(visitorsInput.value);
            if (count > 1) {
                count--;
                visitorsInput.value = count;
                bookingDetails.visitors = count;
            }
        });

        // --- LÓGICA DO CALENDÁRIO ---

        const monthYearLabel = document.getElementById('monthYear');
        const calendarGrid = document.getElementById('calendarGrid');
        const prevMonthBtn = document.getElementById('prevMonth');
        const nextMonthBtn = document.getElementById('nextMonth');

        const monthNames = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];

        function renderCalendar() {
            const month = calendarDate.getMonth();
            const year = calendarDate.getFullYear();

            monthYearLabel.textContent = `${monthNames[month]} ${year}`;
            calendarGrid.innerHTML = ''; // Limpa o calendário anterior

            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            // Desabilita o botão "anterior" se for o mês atual
            prevMonthBtn.disabled = (year === today.getFullYear() && month === today.getMonth());
            prevMonthBtn.classList.toggle('opacity-50', prevMonthBtn.disabled);

            // 1. Preenche os dias vazios no início
            for (let i = 0; i < firstDayOfMonth; i++) {
                calendarGrid.innerHTML += `<div class="w-10 h-10"></div>`;
            }

            // 2. Preenche os dias do mês
            for (let day = 1; day <= daysInMonth; day++) {
                const dayDate = new Date(year, month, day);
                const isPast = dayDate < today;
                // Simula fim de semana (domingo = 0, sábado = 6) - Zoobotânico fecha às segundas (no site), mas vamos simular dom/sab indisponíveis
                const dayOfWeek = dayDate.getDay();
                const isWeekend = dayOfWeek === 0 || dayOfWeek === 6; // Exemplo: desabilita fim de semana

                let classes = 'day-cell w-10 h-10 flex items-center justify-center rounded-full cursor-pointer transition';
                let isDisabled = false;

                if (isPast || isWeekend) {
                    classes += ' text-gray-400 bg-gray-50 cursor-not-allowed';
                    isDisabled = true;
                } else {
                    classes += ' text-gray-700 hover:bg-green-100';
                }

                calendarGrid.innerHTML += `<button class="${classes}" data-date="${dayDate.toISOString()}" ${isDisabled ? 'disabled' : ''}>${day}</button>`;
            }
        }

        prevMonthBtn.addEventListener('click', () => {
            calendarDate.setMonth(calendarDate.getMonth() - 1);
            renderCalendar();
            clearDayAndTimeSelection();
        });

        nextMonthBtn.addEventListener('click', () => {
            calendarDate.setMonth(calendarDate.getMonth() + 1);
            renderCalendar();
            clearDayAndTimeSelection();
        });
        
        function clearDayAndTimeSelection() {
            bookingDetails.date = null;
            bookingDetails.time = null;
            document.getElementById('timeSlotsContainer').classList.add('hidden');
            document.getElementById('confirmBookingButton').disabled = true;
            clearSelections(document.querySelectorAll('.time-slot'));
        }

        // --- LÓGICA DE SELEÇÃO (Calendário e Horário) ---

        // Adiciona listener ao grid do calendário (event delegation)
        calendarGrid.addEventListener('click', (e) => {
            if (e.target.classList.contains('day-cell') && !e.target.disabled) {
                // Remove seleção anterior
                clearSelections(calendarGrid.querySelectorAll('.day-cell'));
                
                // Adiciona nova seleção
                e.target.classList.add('bg-green-600', 'text-white', 'font-bold');
                e.target.classList.remove('hover:bg-green-100');
                
                // Salva a data
                bookingDetails.date = new Date(e.target.dataset.date);
                
                // Mostra os horários e reseta a seleção de horário
                document.getElementById('timeSlotsContainer').classList.remove('hidden');
                bookingDetails.time = null;
                document.getElementById('confirmBookingButton').disabled = true;
                clearSelections(document.querySelectorAll('.time-slot'));
            }
        });

        // Adiciona listener aos horários (event delegation)
        const timeSlotsContainer = document.getElementById('timeSlots');
        timeSlotsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('time-slot') && !e.target.disabled) {
                // Remove seleção anterior
                clearSelections(timeSlotsContainer.querySelectorAll('.time-slot'));

                // Adiciona nova seleção
                e.target.classList.add('bg-green-600', 'text-white', 'font-bold');
                e.target.classList.remove('hover:border-green-500', 'hover:bg-green-50');

                // Salva o horário
                bookingDetails.time = e.target.textContent;

                // Habilita o botão de confirmar
                checkIfBookingIsReady();
            }
        });
        
        function clearSelections(elements) {
            elements.forEach(el => {
                el.classList.remove('bg-green-600', 'text-white', 'font-bold');
                if (!el.disabled) {
                    el.classList.add('hover:bg-green-100'); // Readiciona hover se não for o dia selecionado
                    if(el.classList.contains('time-slot')) {
                         el.classList.add('hover:border-green-500');
                    }
                }
            });
        }

        function checkIfBookingIsReady() {
            const { date, time, visitors } = bookingDetails;
            if (date && time && visitors > 0) {
                document.getElementById('confirmBookingButton').disabled = false;
            } else {
                document.getElementById('confirmBookingButton').disabled = true;
            }
        }

        // --- LÓGICA DA TELA DE CONFIRMAÇÃO ---

        function confirmBooking() {
            if (!bookingDetails.date || !bookingDetails.time) return;

            // Formata a data para exibição
            const formattedDate = bookingDetails.date.toLocaleDateString('pt-BR', {
                day: '2-digit',
                month: 'long',
                year: 'numeric'
            });

            // Preenche os detalhes da confirmação
            const detailsContainer = document.getElementById('confirmationDetails');
            detailsContainer.innerHTML = `
                <div>
                    <span class="block text-xs font-medium text-gray-500">Data</span>
                    <span class="block text-sm font-semibold text-gray-800">${formattedDate}</span>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <span class="block text-xs font-medium text-gray-500">Horário</span>
                        <span class="block text-sm font-semibold text-gray-800">${bookingDetails.time}</span>
                    </div>
                    <div>
                        <span class="block text-xs font-medium text-gray-500">Visitantes</span>
                        <span class="block text-sm font-semibold text-gray-800">${bookingDetails.visitors} ${bookingDetails.visitors > 1 ? 'pessoas' : 'pessoa'}</span>
                    </div>
                </div>
            `;
            
            // Simula a adição ao histórico (idealmente seria uma lista)
            // No protótipo, vamos apenas mostrar a tela de confirmação.

            showView('confirmationScreen');
        }


        // --- INICIALIZAÇÃO ---
        
        // Garante que o script rode após o carregamento do DOM
        document.addEventListener('DOMContentLoaded', () => {
            // Mostra a tela de login ao iniciar
            showView('loginScreen');
        });

    </script>

</body>
</html>
